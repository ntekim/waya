basePath: /api/v1
definitions:
  domain.Batch:
    properties:
      id:
        type: string
      payouts:
        items:
          $ref: '#/definitions/domain.Payout'
        type: array
      status:
        type: string
      totalAmount:
        format: int64
        type: integer
      totalCount:
        type: integer
    type: object
  domain.Payout:
    properties:
      accountNumber:
        description: '"2039..."'
        type: string
      amount:
        description: Cents
        format: int64
        type: integer
      bankCode:
        description: '"033" (UBA)'
        type: string
      bankName:
        description: '"United Bank for Africa"'
        type: string
      batchID:
        type: string
      countryCode:
        description: '"NG", "GH", "KE"'
        type: string
      createdAt:
        type: string
      currency:
        description: '"NGN"'
        type: string
      errorMessage:
        type: string
      id:
        type: string
      recipientEmail:
        description: '"john@example.com"'
        type: string
      recipientName:
        description: '"John Doe"'
        type: string
      recipientPhone:
        description: '"+234..."'
        type: string
      recipientTag:
        description: 'Optional: If sending to Afriex Wallet directly'
        type: string
      referenceID:
        type: string
      status:
        type: string
      updatedAt:
        type: string
    type: object
  http.BulkPayoutRequest:
    properties:
      batch_reference:
        example: JAN_SALARY_2025
        type: string
      items:
        items:
          $ref: '#/definitions/http.PayoutItem'
        type: array
    type: object
  http.BulkPayoutResponse:
    properties:
      batch_id:
        type: string
      message:
        type: string
      status:
        type: string
    type: object
  http.PayoutItem:
    properties:
      account_number:
        example: "2000012345"
        type: string
      amount:
        description: Transaction Details (Step 3 of Afriex Flow)
        example: 5000
        type: number
      bank_code:
        description: Bank Details (Step 2 of Afriex Flow)
        example: "033"
        type: string
      country_code:
        example: NG
        type: string
      currency:
        example: NGN
        type: string
      recipient_email:
        example: emeka@example.com
        type: string
      recipient_name:
        description: User Details (Step 1 of Afriex Flow)
        example: Emeka Okonkwo
        type: string
      recipient_phone:
        example: "+2348012345678"
        type: string
    type: object
host: localhost:8080
info:
  contact:
    email: dev@waya.finance
    name: Waya Support
  description: The high-performance B2B payment orchestration layer for Afriex.
  license:
    name: Apache 2.0
    url: http://www.apache.org/licenses/LICENSE-2.0.html
  termsOfService: http://swagger.io/terms/
  title: Waya API (Afriex Orchestrator)
  version: "1.0"
paths:
  /payouts:
    post:
      consumes:
      - application/json
      description: Accepts a list of recipients, creates customers/payment methods
        on Afriex, and sends money.
      parameters:
      - description: The batch of payouts to process
        in: body
        name: request
        required: true
        schema:
          $ref: '#/definitions/http.BulkPayoutRequest'
      produces:
      - application/json
      responses:
        "202":
          description: Batch accepted for background processing
          schema:
            $ref: '#/definitions/http.BulkPayoutResponse'
        "400":
          description: Invalid JSON or payload
          schema:
            additionalProperties:
              type: string
            type: object
      summary: Trigger Bulk Payout
      tags:
      - Payouts
  /payouts/{batch_id}:
    get:
      description: Retrieves all payouts and status for a given batch ID.
      parameters:
      - description: Unique ID of the payout batch
        in: path
        name: batch_id
        required: true
        type: string
      produces:
      - application/json
      responses:
        "200":
          description: Returns batch details and list of payouts
          schema:
            $ref: '#/definitions/domain.Batch'
        "404":
          description: Batch ID not found
          schema:
            additionalProperties:
              type: string
            type: object
        "500":
          description: Server error
          schema:
            additionalProperties:
              type: string
            type: object
      summary: Get Batch Status
      tags:
      - Payouts
  /webhooks/afriex:
    post:
      consumes:
      - application/json
      description: Receives real-time transaction updates (e.g., SUCCESS/FAILED) from
        Afriex.
      parameters:
      - description: Afriex Webhook Payload
        in: body
        name: request
        required: true
        schema:
          additionalProperties: true
          type: object
      produces:
      - application/json
      responses:
        "200":
          description: OK
          schema:
            type: string
        "400":
          description: Invalid Signature or Payload
          schema:
            type: string
      summary: Afriex Webhook Listener
      tags:
      - Webhooks
swagger: "2.0"
